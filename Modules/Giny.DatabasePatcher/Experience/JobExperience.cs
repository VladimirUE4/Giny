using Giny.Core;
using Giny.Core.DesignPattern;
using Giny.ORM;
using Giny.World.Records.Characters;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Giny.DatabasePatcher.Experience
{
    public class JobExperience 
    {
        private static Dictionary<long, int> JobExperiences = new Dictionary<long, int>()
        {
            {1,0},
            {2,20},
            {3,60},
            {4,120},
            {5, 200},
            {6, 300},
            {7, 420},
            {8, 560},
            {9, 720},
            {10, 900},
            {11, 1100},
            {12, 1320},
            {13, 1560},
            {14, 1820},
            {15, 2100},
            {16, 2400},
            {17, 2720},
            {18, 3060},
            {19, 3420},
            {20, 3800},
            {21, 4200},
            {22, 4620},
            {23, 5060},
            {24, 5520},
            {25, 6000},
            {26, 6500},
            {27, 7020},
            {28, 7560},
            {29, 8120},
            {30, 8700},
            {31, 9300},
            {32, 9920},
            {33, 10560},
            {34, 11220},
            {35, 11900},
            {36, 12600},
            {37, 13320},
            {38, 14060},
            {39, 14820},
            {40, 15600},
            {41, 16400},
            {42, 17220},
            {43, 18060},
            {44, 18920},
            {45, 19800},
            {46, 20700},
            {47, 21620},
            {48, 22560},
            {49, 23520},
            {50, 24500},
            {51, 25500},
            {52, 26520},
            {53, 27560},
            {54, 28620},
            {55, 29700},
            {56, 30800},
            {57, 31920},
            {58, 33060},
            {59, 34220},
            {60, 35400},
            {61, 36600},
            {62, 37820},
            {63, 39060},
            {64, 40320},
            {65, 41600},
            {66, 42900},
            {67, 44220},
            {68, 45560},
            {69, 46920},
            {70, 48300},
            {71, 49700},
            {72, 51120},
            {73, 52560},
            {74, 54020},
            {75, 55500},
            {76, 57000},
            {77, 58520},
            {78, 60060},
            {79, 61620},
            {80, 63200},
            {81, 64800},
            {82, 66420},
            {83, 68060},
            {84, 69720},
            {85, 71400},
            {86, 73100},
            {87, 74820},
            {88, 76560},
            {89, 78320},
            {90, 80100},
            {91, 81900},
            {92, 83720},
            {93, 85560},
            {94, 87420},
            {95, 89300},
            {96, 91200},
            {97, 93120},
            {98, 95060},
            {99, 97020},
            {100, 99000},
            {101, 101000},
            {102, 103020},
            {103, 105060},
            {104, 107120},
            {105, 109200},
            {106, 111300},
            {107, 113420},
            {108, 115560},
            {109, 117720},
            {110, 119900},
            {111, 122100},
            {112, 124320},
            {113, 126560},
            {114, 128820},
            {115, 131100},
            {116, 133400},
            {117, 135720},
            {118, 138060},
            {119, 140420},
            {120, 142800},
            {121, 145200},
            {122, 147620},
            {123, 150060},
            {124, 152520},
            {125, 155000},
            {126, 157500},
            {127, 160020},
            {128, 162560},
            {129, 165120},
            {130, 167700},
            {131, 170300},
            {132, 172920},
            {133, 175560},
            {134, 178220},
            {135, 180900},
            {136, 183600},
            {137, 186320},
            {138, 189060},
            {139, 191820},
            {140, 194600},
            {141, 197400},
            {142, 200220},
            {143, 203060},
            {144, 205920},
            {145, 208800},
            {146, 211700},
            {147, 214620},
            {148, 217560},
            {149, 220520},
            {150, 223500},
            {151, 226500},
            {152, 229520},
            {153, 232560},
            {154, 235620},
            {155, 238700},
            {156, 241800},
            {157, 244920},
            {158, 248060},
            {159, 251220},
            {160, 254400},
            {161, 257600},
            {162, 260820},
            {163, 264060},
            {164, 267320},
            {165, 270600},
            {166, 273900},
            {167, 277220},
            {168, 280560},
            {169, 283920},
            {170, 287300},
            {171, 290700},
            {172, 294120},
            {173, 297560},
            {174, 301020},
            {175, 304500},
            {176, 308000},
            {177, 311520},
            {178, 315060},
            {179, 318620},
            {180, 322200},
            {181, 325800},
            {182, 329420},
            {183, 333060},
            {184, 336720},
            {185, 340400},
            {186, 344100},
            {187, 347820},
            {188, 351560},
            {189, 355320},
            {190, 359100},
            {191, 362900},
            {192, 366720},
            {193, 370560},
            {194, 374420},
            {195, 378300},
            {196, 382200},
            {197, 386120},
            {198, 390060},
            {199, 394020},
            {200, 398000},
        };


        public static void Patch()
        {
            Logger.Write("Building job experience table ...");

            foreach (var record in ExperienceRecord.GetExperiences())
            {
                if (JobExperiences.ContainsKey(record.Level))
                {
                    record.ExperienceJob = JobExperiences[record.Level];
                }

                record.UpdateInstantElement();
            }
        }
    }
}
